<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Hello World</title>
    <style>
      :root {
        color-scheme: light dark;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background-color: Canvas;
        color: CanvasText;
      }
      body {
        display: grid;
        place-items: center;
        min-height: 100vh;
        margin: 0;
      }
      h1 {
        font-size: clamp(2.5rem, 5vw, 4rem);
        font-weight: 700;
      }
    </style>
  </head>
  <body>
    <h1>Hello World</h1>
    <p id="status" role="status" aria-live="polite"></p>
    <script>
      const statusEl = document.getElementById("status");
      const setStatus = (message, isError = false) => {
        if (!statusEl) return;
        statusEl.textContent = message;
        statusEl.style.color = isError ? "crimson" : "";
      };

      const setError = (message) => {
        console.error(message);
        setStatus(message, true);
      };

      const speak = () => {
        const utterance = new SpeechSynthesisUtterance("Hello World");
        const voices = window.speechSynthesis.getVoices();
        if (voices.length) {
          utterance.voice = voices[0];
        }

        utterance.onstart = () => setStatus("Speech playback started.");
        utterance.onend = () => setStatus("Speech playback finished.");
        utterance.onerror = (event) => {
          setError(`Speech synthesis error: ${event.error || "unknown"}`);
        };

        window.speechSynthesis.cancel();
        window.speechSynthesis.speak(utterance);
      };

      document.addEventListener("DOMContentLoaded", () => {
        if (!("speechSynthesis" in window)) {
          setError("Speech synthesis is not supported in this browser.");
          return;
        }

        setStatus("Preparing speech playback...");

        setTimeout(() => {
          try {
            speak();
          } catch (error) {
            setError(`Unable to start speech: ${error}`);
          }
        }, 1000);
      });
    </script>
  </body>
</html>
